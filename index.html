<html>
<title>bujutwo2too</title>
<head>
  <link rel="stylesheet" href="css/bujustyle.css">
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/nytimes.css">
  <link rel="stylesheet" href="css/soloweather.css">
  <link rel="stylesheet" href="weather_icons/weather-icons.css">
  <style>
    h3, span {
      font-size: 200px;
    }
  </style>

</head>
  <body>
    <iframe src="https://embed.spotify.com/?uri=spotify:user:1250679339:playlist:0pbHnaOr3cRY1napC9hrt7" width="300" height="380" frameborder="0" allowtransparency="true"></iframe>

    <div class="sports">
      <a href="http://rangers.nhl.com/club/schedule.htm?season=20142015&gameType=2" target="_blank">
        <img src="pics/nyrangers.png" id="nyr" class ="sportpic" height="50"/>
      </a>
      <a href="http://newyork.mets.mlb.com/index.jsp?c_id=nym" target="_blank">
        <img src="pics/nymets.png" id="nymets" class ="sportpic" height="50"/>
      </a>
      <a href="http://espn.go.com/blog/new-york/giants" target="_blank">
        <img src="pics/nygiants.png" id="nygiants" class ="sportpic" height="50"/>
      </a>
      <a href="#" target="_blank">
        <img src="pics/nyknicks2.png" id="nyknicks" class ="sportpic" height="50"/>
      </a>
      <a href="http://football.fantasysports.yahoo.com/" target="_blank">
        <img src="pics/yahoo.png" id="yahoo" class ="sportpic" height="50" style="border-radius: 10px"/>
      </a>
    </div>
    <!-- <h3>testing   <span class="wi wi-cloudy"></span> </h3> -->
    <div class="others">
      <a href="https://secure.skype.com/portal/overview" target="_blank">
        <img src="pics/skype.png" id="skype" class ="otherpic" height="50"/>
      </a>
      <a href="https://princesspeach.slack.com/messages/general/" target="_blank">
        <img src="pics/slack.png" id="slack" class ="otherpic" height="52"/>
      </a>
      <a href="https://www.linkedin.com/in/wwilcox" target="_blank">
        <img src="pics/linkedin.png" id="linkedin" class ="otherpic" width="50"/>
      </a>
      <a href="https://venmo.com/" target="_blank">
        <img src="pics/venmo.png" id="venmo" class ="otherpic" height="50"/>
      </a>
    </div>
    <div id="lock">
      <img src="pics/lock.png" id="lockpic" height="50"/>
    </div>
    <a href="https://twitter.com/?lang=en" target="_blank">
      <div id="tweet">
        <img src="pics/twitter.png" id="twitterpic" height="400"/>
      </div>
    </a>
    <a href="https://www.facebook.com/" target="_blank">
      <div id="facebook">
        <img src="pics/fbhead.png" id="fbpic" height="45"/>
      </div>
    </a>
    <a href="http://www.nytimes.com/" target="_blank">
      <div id="nytimes">
        <img src="pics/nytimes.png" id="nytimespic" height="500"/>
      </div>
    </a>

    <a href="https://mail.google.com/mail/ca/u/0/?pli=1#inbox" target="_blank">
      <div id="gmail1" class="gmail">
        <h4 style="background-color: rgba(255,255,255,.3); padding: 3px; border-radius: 5px">wgmwilcox<span style="color: red; font-size: 16px">(3)</span></h4>
        <img src="pics/gmail1.png" height="100px"/>
      </div>
    </a>

    <a href="https://mail.google.com/mail/ca/u/1/#inbox" target="_blank">
      <div id="gmail2" class="gmail">
        <h4 style="background-color: rgba(255,255,255,.3); padding: 3px; border-radius: 5px">wwilcox88<span style="color: red; font-size: 16px">(12)</span></h4>
        <img src="pics/gmail2.png" height="100px"/>
      </div>
    </a>

    <script charset="utf-8">
      var body = document.querySelector("body");
      var div1 = document.createElement("div");
      div1.setAttribute("id", "div1");
      body.appendChild(div1);
      var url = "/news";
      var xhr = new XMLHttpRequest();
      xhr.open("GET", url);
      xhr.addEventListener('load', function(e) {
        var data = xhr.responseText;
        var parsed = JSON.parse(data);
        for(var i = 0; i < 19; i++){
          //individual divs
          var lilDiv = document.createElement("div");
          lilDiv.setAttribute("class", "lilDiv");
          div1.appendChild(lilDiv);
          //a href
          var link = document.createElement("a");
          link.setAttribute("href", parsed["results"][i]["url"]);
          link.setAttribute("target", "_blank");
          link.setAttribute("style", "text-decoration: none");
          div1.appendChild(link);

          //byline
          var byline = document.createElement("p");
          byline.setAttribute("id", "byline");
          byline.innerHTML = parsed["results"][i]["byline"];
          div1.appendChild(byline);
          //date
          var date = document.createElement("p");
          date.setAttribute("id", "date");
          date.innerHTML = parsed["results"][i]["published_date"];
          div1.appendChild(date);
          //headline
          var headline = document.createElement("h2");
          headline.setAttribute("id", "headline");
          headline.innerHTML = parsed["results"][i]["title"];
          div1.appendChild(headline);
          link.appendChild(headline);
          //console.log(headline.innerHTML)
          //abstract
          var abstract = document.createElement("p");
          abstract.setAttribute("id", "abstract");
          abstract.innerHTML = parsed["results"][i]["abstract"];
          div1.appendChild(abstract);

          // //image
          // var imgNYTimes = document.createElement("img");
          // imgNYTimes.setAttribute("id", "imgNYTimes");
          // if(parsed["results"][i]["multimedia"][0]["url"]){
          //   console.log("up")
          //   imgNYTimes.setAttribute("src", parsed["results"][i]["multimedia"][0]["url"]);
          //   console.log("down")
          //
          //   // //imgNYTimes.setAttribute("src", parsed["results"][i]["media"][0]["media-metadata"][0]["url"]);
          // } else {
          //   console.log("inside the thigns");
          //   //var imgSync = document.createElement("img");
          //   // imgSync.setAttribute("id", "imgSync");
          //   imgNYTimes.setAttribute("src", "pics/timesny.png");
          // };
          //
          // link.appendChild(imgNYTimes);
          // //line break
          var lineBreak = document.createElement("br");
          div1.appendChild(lineBreak);
        };

      });
      xhr.send();


      //weather

      var body = document.querySelector("body");
      var weatherDiv = document.createElement("div");
      weatherDiv.setAttribute("id", "weatherDiv");
      body.appendChild(weatherDiv);
      var url2 = "/weather";
      var xhrx = new XMLHttpRequest();
      xhrx.open("GET", url2);
      xhrx.addEventListener('load', function(e) {
        var data = xhrx.responseText;
        var parsed = JSON.parse(data);

        //temperature
        var temp = document.createElement("h2");
        temp.setAttribute("id", "temp");
        console.log(parsed["currently"]["temperature"]);
        temp.innerHTML = parseInt(parsed["currently"]["temperature"]) + ("Â°");
        weatherDiv.appendChild(temp);
        //icon
        var weatherImg = document.createElement("h6");
        weatherImg.setAttribute("id", "weatherImg")
        weatherImg.setAttribute("class", parsed["currently"]["icon"]);
        console.log(parsed["currently"]["icon"] + " = class right now");
        if (parsed["currently"]["icon"] === "clear-day"){
          var weatherStatus = "wi wi-day-sunny";
        }
        else if (parsed["currently"]["icon"] === "partly-cloudy-day"){
          var weatherStatus = "wi wi-cloudy";
        }
        else if (parsed["currently"]["icon"] === "partly-cloudy-night"){
          var weatherStatus = "wi wi-cloudy";
          console.log("cloudy at night");
        }
        else if (parsed["currently"]["icon"] === "snow"){
          var weatherStatus = "wi wi-snow";
          console.log("snowing right meow");
        }

        weatherImg.setAttribute("class", weatherStatus);

        console.log(weatherImg);
        weatherDiv.appendChild(weatherImg);
        console.log("it reached the end");
      });
      xhrx.send();


    </script>
  </body>
</html>
